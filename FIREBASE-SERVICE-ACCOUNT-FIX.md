# Firebase Service Account Fix Guide

Follow these steps to fix the Firebase authentication issues in your Payroll System application.

## Current Issue
```
Service account project_id: money-transfering
Firebase Admin SDK initialization failed: Firebase service account private_key is invalid or contains placeholder values
Server will run in client-only mode - some features requiring Admin SDK will not work
```

## Step-by-Step Solution

### Step 1: Generate a New Service Account

1. Go to the [Firebase Console](https://console.firebase.google.com/) and select your project (`money-transfering`)
2. Click the ⚙️ gear icon next to "Project Overview" to access Project Settings
3. Select the "Service accounts" tab
4. Click "Generate new private key" button under the Firebase Admin SDK section
5. Confirm by clicking "Generate key"
6. Save the downloaded JSON file (it will have a name like `money-transfering-firebase-adminsdk-xxxx-yyyyyyyy.json`)

### Step 2: Update Your Local Project

1. Rename the downloaded file to `firebase-service-account.json`
2. Copy it to the root of your project, replacing the existing file with placeholder values
3. Validate the service account using the provided script:
   ```
   npm run validate:service-account
   ```
4. If the validation passes, restart your application:
   ```
   npm start
   ```

### Step 3: Update Vercel Deployment

1. Prepare the service account for Vercel:
   ```
   npm run prepare:service-account
   ```
2. Copy the content of the generated file `firebase-service-account-for-vercel.txt`
3. Go to your [Vercel Dashboard](https://vercel.com/dashboard) and select your project
4. Go to Settings > Environment Variables
5. Create a new environment variable:
   - Name: `FIREBASE_SERVICE_ACCOUNT`
   - Value: Paste the copied JSON string
6. Click "Save"
7. Redeploy your application:
   ```
   npm run deploy:vercel
   ```

### Step 4: Verify the Fix

1. Access your local application at http://localhost:3000
2. Attempt to login with your Firebase credentials
3. If successful, the Firebase Admin SDK is now working correctly

## Security Notes

- Keep your service account credentials secure
- Never commit the `firebase-service-account.json` file to public repositories
- Consider adding environment-specific service accounts for development and production

If you continue to experience issues, review the detailed logs generated by the application.
